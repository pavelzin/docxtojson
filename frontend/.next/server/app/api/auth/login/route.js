"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_pawel_Code_docxtojson_frontend_app_api_auth_login_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/login/route.js */ \"(rsc)/./app/api/auth/login/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"/Users/pawel/Code/docxtojson/frontend/app/api/auth/login/route.js\",\n    nextConfigOutput,\n    userland: _Users_pawel_Code_docxtojson_frontend_app_api_auth_login_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnBhd2VsJTJGQ29kZSUyRmRvY3h0b2pzb24lMkZmcm9udGVuZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwYXdlbCUyRkNvZGUlMkZkb2N4dG9qc29uJTJGZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jeC1lZGl0b3ItZnJvbnRlbmQvPzA3ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Bhd2VsL0NvZGUvZG9jeHRvanNvbi9mcm9udGVuZC9hcHAvYXBpL2F1dGgvbG9naW4vcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbG9naW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL2xvZ2luXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3Bhd2VsL0NvZGUvZG9jeHRvanNvbi9mcm9udGVuZC9hcHAvYXBpL2F1dGgvbG9naW4vcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvbG9naW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/login/route.js":
/*!*************************************!*\
  !*** ./app/api/auth/login/route.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/auth.js */ \"(rsc)/./lib/auth.js\");\n\n\nasync function POST(request) {\n    try {\n        const { username, password } = await request.json();\n        if (!username || !password) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Nazwa użytkownika i hasło są wymagane\"\n            }, {\n                status: 400\n            });\n        }\n        const result = await (0,_lib_auth_js__WEBPACK_IMPORTED_MODULE_1__.loginUser)(username, password);\n        if (!result.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: result.error\n            }, {\n                status: 401\n            });\n        }\n        // Ustawienie cookie z tokenem\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user: result.user\n        });\n        response.cookies.set(\"auth_token\", result.token, {\n            httpOnly: true,\n            secure: \"development\" === \"production\",\n            sameSite: \"lax\",\n            maxAge: 7 * 24 * 60 * 60 // 7 dni\n        });\n        return response;\n    } catch (error) {\n        console.error(\"Błąd API logowania:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Błąd serwera\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbG9naW4vcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ1M7QUFFN0MsZUFBZUUsS0FBS0MsT0FBTztJQUNoQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU1GLFFBQVFHLElBQUk7UUFFakQsSUFBSSxDQUFDRixZQUFZLENBQUNDLFVBQVU7WUFDMUIsT0FBT0wscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBd0MsR0FDakQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1DLFNBQVMsTUFBTVIsdURBQVNBLENBQUNHLFVBQVVDO1FBRXpDLElBQUksQ0FBQ0ksT0FBT0MsT0FBTyxFQUFFO1lBQ25CLE9BQU9WLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPRSxPQUFPRixLQUFLO1lBQUMsR0FDdEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDhCQUE4QjtRQUM5QixNQUFNRyxXQUFXWCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQ2pDSSxTQUFTO1lBQ1RFLE1BQU1ILE9BQU9HLElBQUk7UUFDbkI7UUFFQUQsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsY0FBY0wsT0FBT00sS0FBSyxFQUFFO1lBQy9DQyxVQUFVO1lBQ1ZDLFFBQVFDLGtCQUF5QjtZQUNqQ0MsVUFBVTtZQUNWQyxRQUFRLElBQUksS0FBSyxLQUFLLEdBQUcsUUFBUTtRQUNuQztRQUVBLE9BQU9UO0lBRVQsRUFBRSxPQUFPSixPQUFPO1FBQ2RjLFFBQVFkLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBZSxHQUN4QjtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3gtZWRpdG9yLWZyb250ZW5kLy4vYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLmpzPzhmMGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgbG9naW5Vc2VyIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2F1dGguanMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05hendhIHXFvHl0a293bmlrYSBpIGhhc8WCbyBzxIUgd3ltYWdhbmUnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2dpblVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogcmVzdWx0LmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBVc3Rhd2llbmllIGNvb2tpZSB6IHRva2VuZW1cbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiByZXN1bHQudXNlclxuICAgIH0pO1xuXG4gICAgcmVzcG9uc2UuY29va2llcy5zZXQoJ2F1dGhfdG9rZW4nLCByZXN1bHQudG9rZW4sIHtcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgbWF4QWdlOiA3ICogMjQgKiA2MCAqIDYwIC8vIDcgZG5pXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdCxYLEhWQgQVBJIGxvZ293YW5pYTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0LFgsSFZCBzZXJ3ZXJhJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibG9naW5Vc2VyIiwiUE9TVCIsInJlcXVlc3QiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicmVzdWx0Iiwic3VjY2VzcyIsInJlc3BvbnNlIiwidXNlciIsImNvb2tpZXMiLCJzZXQiLCJ0b2tlbiIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsInNhbWVTaXRlIiwibWF4QWdlIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/login/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   initAuthDB: () => (/* binding */ initAuthDB),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _database_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./database.js */ \"(rsc)/./lib/database.js\");\n/* harmony import */ var _database_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_database_js__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst { openDb } = (_database_js__WEBPACK_IMPORTED_MODULE_2___default());\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-super-secret-jwt-key-change-this-in-production\";\n// Domyślny użytkownik admin (hasło: admin123)\nconst DEFAULT_USER = {\n    username: \"admin\",\n    password: \"$2a$10$8K1p/a0drteBtjM38FlEOeOlc2D9t1QC9RmF2qQvzlY7YHQ8KgaO2\" // bcrypt hash dla 'admin123'\n};\n// Inicjalizacja tabeli użytkowników\nasync function initAuthDB() {\n    const db = await openDb();\n    // Tworzenie tabeli użytkowników\n    await db.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      username TEXT UNIQUE NOT NULL,\n      password TEXT NOT NULL,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    )\n  `);\n    // Tworzenie tabeli sesji\n    await db.exec(`\n    CREATE TABLE IF NOT EXISTS sessions (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER,\n      token TEXT UNIQUE NOT NULL,\n      expires_at DATETIME NOT NULL,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (user_id) REFERENCES users (id)\n    )\n  `);\n    // Dodanie domyślnego użytkownika admin jeśli nie istnieje\n    const existingUser = await db.get(\"SELECT id FROM users WHERE username = ?\", [\n        DEFAULT_USER.username\n    ]);\n    if (!existingUser) {\n        await db.run(\"INSERT INTO users (username, password) VALUES (?, ?)\", [\n            DEFAULT_USER.username,\n            DEFAULT_USER.password\n        ]);\n        console.log(\"✅ Utworzono domyślnego użytkownika: admin/admin123\");\n    }\n    await db.close();\n}\n// Logowanie użytkownika\nasync function loginUser(username, password) {\n    const db = await openDb();\n    try {\n        const user = await db.get(\"SELECT * FROM users WHERE username = ?\", [\n            username\n        ]);\n        if (!user) {\n            return {\n                success: false,\n                error: \"Nieprawidłowa nazwa użytkownika lub hasło\"\n            };\n        }\n        const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, user.password);\n        if (!isValidPassword) {\n            return {\n                success: false,\n                error: \"Nieprawidłowa nazwa użytkownika lub hasło\"\n            };\n        }\n        // Tworzenie tokena JWT\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n            userId: user.id,\n            username: user.username\n        }, JWT_SECRET, {\n            expiresIn: \"7d\"\n        });\n        // Zapisanie sesji w bazie\n        const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 dni\n        await db.run(\"INSERT INTO sessions (user_id, token, expires_at) VALUES (?, ?, ?)\", [\n            user.id,\n            token,\n            expiresAt.toISOString()\n        ]);\n        // Usuwanie starych sesji (starszych niż 30 dni)\n        await db.run('DELETE FROM sessions WHERE expires_at < datetime(\"now\")');\n        return {\n            success: true,\n            token,\n            user: {\n                id: user.id,\n                username: user.username\n            }\n        };\n    } catch (error) {\n        console.error(\"Błąd logowania:\", error);\n        return {\n            success: false,\n            error: \"Błąd serwera\"\n        };\n    } finally{\n        await db.close();\n    }\n}\n// Weryfikacja tokena\nasync function verifyToken(token) {\n    if (!token) {\n        return {\n            valid: false,\n            error: \"Brak tokena\"\n        };\n    }\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        const db = await openDb();\n        // Sprawdzenie czy sesja istnieje w bazie\n        const session = await db.get('SELECT s.*, u.username FROM sessions s JOIN users u ON s.user_id = u.id WHERE s.token = ? AND s.expires_at > datetime(\"now\")', [\n            token\n        ]);\n        await db.close();\n        if (!session) {\n            return {\n                valid: false,\n                error: \"Nieprawidłowa sesja\"\n            };\n        }\n        return {\n            valid: true,\n            user: {\n                id: session.user_id,\n                username: session.username\n            }\n        };\n    } catch (error) {\n        return {\n            valid: false,\n            error: \"Nieprawidłowy token\"\n        };\n    }\n}\n// Wylogowanie (usunięcie sesji)\nasync function logoutUser(token) {\n    if (!token) return {\n        success: false\n    };\n    const db = await openDb();\n    try {\n        await db.run(\"DELETE FROM sessions WHERE token = ?\", [\n            token\n        ]);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Błąd wylogowania:\", error);\n        return {\n            success: false\n        };\n    } finally{\n        await db.close();\n    }\n}\n// Middleware do sprawdzania autoryzacji\nfunction requireAuth(handler) {\n    return async (req, res)=>{\n        const token = req.cookies?.auth_token || req.headers.authorization?.replace(\"Bearer \", \"\");\n        const verification = await verifyToken(token);\n        if (!verification.valid) {\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n        req.user = verification.user;\n        return handler(req, res);\n    };\n}\n// Hash hasła (do tworzenia nowych użytkowników)\nasync function hashPassword(password) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, 10);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFBZ0Q7QUFDekMsZUFBZVMsYUFBYTVDLFFBQVE7SUFDekMsT0FBTyxNQUFNVCxvREFBVyxDQUFDUyxVQUFVO0FBQ3JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jeC1lZGl0b3ItZnJvbnRlbmQvLi9saWIvYXV0aC5qcz8yODdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGRhdGFiYXNlIGZyb20gJy4vZGF0YWJhc2UuanMnO1xuXG5jb25zdCB7IG9wZW5EYiB9ID0gZGF0YWJhc2U7XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXN1cGVyLXNlY3JldC1qd3Qta2V5LWNoYW5nZS10aGlzLWluLXByb2R1Y3Rpb24nO1xuXG4vLyBEb215xZtsbnkgdcW8eXRrb3duaWsgYWRtaW4gKGhhc8WCbzogYWRtaW4xMjMpXG5jb25zdCBERUZBVUxUX1VTRVIgPSB7XG4gIHVzZXJuYW1lOiAnYWRtaW4nLFxuICBwYXNzd29yZDogJyQyYSQxMCQ4SzFwL2EwZHJ0ZUJ0ak0zOEZsRU9lT2xjMkQ5dDFRQzlSbUYycVF2emxZN1lIUThLZ2FPMicgLy8gYmNyeXB0IGhhc2ggZGxhICdhZG1pbjEyMydcbn07XG5cbi8vIEluaWNqYWxpemFjamEgdGFiZWxpIHXFvHl0a293bmlrw7N3XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdEF1dGhEQigpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGIoKTtcbiAgXG4gIC8vIFR3b3J6ZW5pZSB0YWJlbGkgdcW8eXRrb3duaWvDs3dcbiAgYXdhaXQgZGIuZXhlYyhgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICBwYXNzd29yZCBURVhUIE5PVCBOVUxMLFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgKVxuICBgKTtcblxuICAvLyBUd29yemVuaWUgdGFiZWxpIHNlc2ppXG4gIGF3YWl0IGRiLmV4ZWMoYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNlc3Npb25zIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIHVzZXJfaWQgSU5URUdFUixcbiAgICAgIHRva2VuIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgZXhwaXJlc19hdCBEQVRFVElNRSBOT1QgTlVMTCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzIChpZClcbiAgICApXG4gIGApO1xuXG4gIC8vIERvZGFuaWUgZG9tecWbbG5lZ28gdcW8eXRrb3duaWthIGFkbWluIGplxZtsaSBuaWUgaXN0bmllamVcbiAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgaWQgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8nLCBbREVGQVVMVF9VU0VSLnVzZXJuYW1lXSk7XG4gIGlmICghZXhpc3RpbmdVc2VyKSB7XG4gICAgYXdhaXQgZGIucnVuKFxuICAgICAgJ0lOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQpIFZBTFVFUyAoPywgPyknLFxuICAgICAgW0RFRkFVTFRfVVNFUi51c2VybmFtZSwgREVGQVVMVF9VU0VSLnBhc3N3b3JkXVxuICAgICk7XG4gICAgY29uc29sZS5sb2coJ+KchSBVdHdvcnpvbm8gZG9tecWbbG5lZ28gdcW8eXRrb3duaWthOiBhZG1pbi9hZG1pbjEyMycpO1xuICB9XG5cbiAgYXdhaXQgZGIuY2xvc2UoKTtcbn1cblxuLy8gTG9nb3dhbmllIHXFvHl0a293bmlrYVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGIoKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmdldCgnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8nLCBbdXNlcm5hbWVdKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05pZXByYXdpZMWCb3dhIG5hendhIHXFvHl0a293bmlrYSBsdWIgaGFzxYJvJyB9O1xuICAgIH1cblxuICAgIGNvbnN0IGlzVmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICBcbiAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTmllcHJhd2lkxYJvd2EgbmF6d2EgdcW8eXRrb3duaWthIGx1YiBoYXPFgm8nIH07XG4gICAgfVxuXG4gICAgLy8gVHdvcnplbmllIHRva2VuYSBKV1RcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxuICAgICAgeyB1c2VySWQ6IHVzZXIuaWQsIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lIH0sXG4gICAgICBKV1RfU0VDUkVULFxuICAgICAgeyBleHBpcmVzSW46ICc3ZCcgfVxuICAgICk7XG5cbiAgICAvLyBaYXBpc2FuaWUgc2VzamkgdyBiYXppZVxuICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIDcgZG5pXG4gICAgYXdhaXQgZGIucnVuKFxuICAgICAgJ0lOU0VSVCBJTlRPIHNlc3Npb25zICh1c2VyX2lkLCB0b2tlbiwgZXhwaXJlc19hdCkgVkFMVUVTICg/LCA/LCA/KScsXG4gICAgICBbdXNlci5pZCwgdG9rZW4sIGV4cGlyZXNBdC50b0lTT1N0cmluZygpXVxuICAgICk7XG5cbiAgICAvLyBVc3V3YW5pZSBzdGFyeWNoIHNlc2ppIChzdGFyc3p5Y2ggbmnFvCAzMCBkbmkpXG4gICAgYXdhaXQgZGIucnVuKCdERUxFVEUgRlJPTSBzZXNzaW9ucyBXSEVSRSBleHBpcmVzX2F0IDwgZGF0ZXRpbWUoXCJub3dcIiknKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdG9rZW4sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZVxuICAgICAgfVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQsWCxIVkIGxvZ293YW5pYTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQsWCxIVkIHNlcndlcmEnIH07XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgZGIuY2xvc2UoKTtcbiAgfVxufVxuXG4vLyBXZXJ5ZmlrYWNqYSB0b2tlbmFcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbikge1xuICBpZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0JyYWsgdG9rZW5hJyB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCk7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGIoKTtcblxuICAgIC8vIFNwcmF3ZHplbmllIGN6eSBzZXNqYSBpc3RuaWVqZSB3IGJhemllXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGRiLmdldChcbiAgICAgICdTRUxFQ1Qgcy4qLCB1LnVzZXJuYW1lIEZST00gc2Vzc2lvbnMgcyBKT0lOIHVzZXJzIHUgT04gcy51c2VyX2lkID0gdS5pZCBXSEVSRSBzLnRva2VuID0gPyBBTkQgcy5leHBpcmVzX2F0ID4gZGF0ZXRpbWUoXCJub3dcIiknLFxuICAgICAgW3Rva2VuXVxuICAgICk7XG5cbiAgICBhd2FpdCBkYi5jbG9zZSgpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnTmllcHJhd2lkxYJvd2Egc2VzamEnIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogc2Vzc2lvbi51c2VyX2lkLFxuICAgICAgICB1c2VybmFtZTogc2Vzc2lvbi51c2VybmFtZVxuICAgICAgfVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ05pZXByYXdpZMWCb3d5IHRva2VuJyB9O1xuICB9XG59XG5cbi8vIFd5bG9nb3dhbmllICh1c3VuacSZY2llIHNlc2ppKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ291dFVzZXIodG9rZW4pIHtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcblxuICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYigpO1xuICBcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYi5ydW4oJ0RFTEVURSBGUk9NIHNlc3Npb25zIFdIRVJFIHRva2VuID0gPycsIFt0b2tlbl0pO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdCxYLEhWQgd3lsb2dvd2FuaWE6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgZGIuY2xvc2UoKTtcbiAgfVxufVxuXG4vLyBNaWRkbGV3YXJlIGRvIHNwcmF3ZHphbmlhIGF1dG9yeXphY2ppXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUF1dGgoaGFuZGxlcikge1xuICByZXR1cm4gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcz8uYXV0aF90b2tlbiB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xuICAgIFxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcbiAgICBcbiAgICBpZiAoIXZlcmlmaWNhdGlvbi52YWxpZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cblxuICAgIHJlcS51c2VyID0gdmVyaWZpY2F0aW9uLnVzZXI7XG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xuICB9O1xufVxuXG4vLyBIYXNoIGhhc8WCYSAoZG8gdHdvcnplbmlhIG5vd3ljaCB1xbx5dGtvd25pa8OzdylcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQpIHtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XG59ICJdLCJuYW1lcyI6WyJiY3J5cHQiLCJqd3QiLCJkYXRhYmFzZSIsIm9wZW5EYiIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiREVGQVVMVF9VU0VSIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImluaXRBdXRoREIiLCJkYiIsImV4ZWMiLCJleGlzdGluZ1VzZXIiLCJnZXQiLCJydW4iLCJjb25zb2xlIiwibG9nIiwiY2xvc2UiLCJsb2dpblVzZXIiLCJ1c2VyIiwic3VjY2VzcyIsImVycm9yIiwiaXNWYWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsInRva2VuIiwic2lnbiIsInVzZXJJZCIsImlkIiwiZXhwaXJlc0luIiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwidmVyaWZ5VG9rZW4iLCJ2YWxpZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJzZXNzaW9uIiwidXNlcl9pZCIsImxvZ291dFVzZXIiLCJyZXF1aXJlQXV0aCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjb29raWVzIiwiYXV0aF90b2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVwbGFjZSIsInZlcmlmaWNhdGlvbiIsInN0YXR1cyIsImpzb24iLCJoYXNoUGFzc3dvcmQiLCJoYXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst sqlite3 = (__webpack_require__(/*! sqlite3 */ \"sqlite3\").verbose)();\nconst path = __webpack_require__(/*! path */ \"path\");\nconst { promisify } = __webpack_require__(/*! util */ \"util\");\n// Inicjalizacja bazy danych\nconst dbPath = path.join(process.cwd(), \"articles.db\");\nconst db = new sqlite3.Database(dbPath);\n// Promisify metod SQLite3 - POPRAWKA dla lastID\nconst dbRun = (sql, params = [])=>{\n    return new Promise((resolve, reject)=>{\n        db.run(sql, params, function(err) {\n            if (err) {\n                reject(err);\n            } else {\n                resolve({\n                    lastID: this.lastID,\n                    changes: this.changes\n                });\n            }\n        });\n    });\n};\nconst dbGet = promisify(db.get.bind(db));\nconst dbAll = promisify(db.all.bind(db));\n// Schemat bazy danych\nconst initializeDatabase = async ()=>{\n    try {\n        // Tabela artykułów\n        await dbRun(`\n      CREATE TABLE IF NOT EXISTS articles (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        article_id TEXT UNIQUE NOT NULL,\n        title TEXT NOT NULL,\n        title_hotnews TEXT,\n        title_social TEXT,\n        title_seo TEXT,\n        lead TEXT,\n        description TEXT,\n        author TEXT,\n        sources TEXT, -- JSON array\n        categories TEXT, -- JSON array \n        tags TEXT, -- JSON array\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        imported_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        status TEXT DEFAULT 'draft' -- draft, published, archived\n      )\n    `);\n        // Migracja: dodaj nowe kolumny jeśli nie istnieją\n        try {\n            await dbRun(`ALTER TABLE articles ADD COLUMN imported_from TEXT`);\n            console.log(\"Dodano kolumnę imported_from\");\n        } catch (e) {\n        // Kolumna już istnieje\n        }\n        try {\n            await dbRun(`ALTER TABLE articles ADD COLUMN drive_path TEXT`);\n            console.log(\"Dodano kolumnę drive_path\");\n        } catch (e) {\n        // Kolumna już istnieje\n        }\n        try {\n            await dbRun(`ALTER TABLE articles ADD COLUMN original_filename TEXT`);\n            console.log(\"Dodano kolumnę original_filename\");\n        } catch (e) {\n        // Kolumna już istnieje\n        }\n        // Tabela dla śledzenia synchronizacji Google Drive\n        await dbRun(`\n      CREATE TABLE IF NOT EXISTS sync_log (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        sync_type TEXT NOT NULL, -- 'full', 'incremental', 'month'\n        target_month TEXT, -- NULL dla full, nazwa miesiąca dla month\n        started_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        completed_at DATETIME,\n        status TEXT DEFAULT 'running', -- 'running', 'completed', 'failed'\n        processed_count INTEGER DEFAULT 0,\n        imported_count INTEGER DEFAULT 0,\n        skipped_count INTEGER DEFAULT 0,\n        error_message TEXT,\n        last_file_modified DATETIME -- najnowszy plik z tej synchronizacji\n      )\n    `);\n        // Tabela dla metadanych plików Drive (cache)\n        await dbRun(`\n      CREATE TABLE IF NOT EXISTS drive_files_cache (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        file_id TEXT UNIQUE NOT NULL,\n        file_name TEXT NOT NULL,\n        file_path TEXT NOT NULL, -- np. \"LIPIEC 2025/Artykuł o psach\"\n        modified_time DATETIME NOT NULL,\n        size INTEGER,\n        last_checked DATETIME DEFAULT CURRENT_TIMESTAMP,\n        is_processed BOOLEAN DEFAULT FALSE\n      )\n    `);\n        // Tabela dla śledzenia pól wygenerowanych przez AI\n        await dbRun(`\n      CREATE TABLE IF NOT EXISTS ai_generated_fields (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        article_id TEXT NOT NULL,\n        field_name TEXT NOT NULL,\n        is_ai_generated BOOLEAN DEFAULT TRUE,\n        generation_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n        ai_confidence REAL DEFAULT 1.0,\n        FOREIGN KEY (article_id) REFERENCES articles(article_id) ON DELETE CASCADE,\n        UNIQUE(article_id, field_name)\n      )\n    `);\n        // Tabela dla historii edycji\n        await dbRun(`\n      CREATE TABLE IF NOT EXISTS edit_history (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        article_id TEXT NOT NULL,\n        field_name TEXT NOT NULL,\n        old_value TEXT,\n        new_value TEXT,\n        edited_by TEXT DEFAULT 'user',\n        edited_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (article_id) REFERENCES articles(article_id) ON DELETE CASCADE\n      )\n    `);\n        // Indeksy\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_articles_article_id ON articles(article_id)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_articles_status ON articles(status)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_articles_created_at ON articles(created_at)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_articles_drive_path ON articles(drive_path)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_sync_log_started_at ON sync_log(started_at)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_drive_files_modified_time ON drive_files_cache(modified_time)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_drive_files_path ON drive_files_cache(file_path)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_ai_fields_article_id ON ai_generated_fields(article_id)`);\n        await dbRun(`CREATE INDEX IF NOT EXISTS idx_edit_history_article_id ON edit_history(article_id)`);\n        console.log(\"✅ Baza danych została zainicjalizowana\");\n    } catch (error) {\n        console.error(\"❌ Błąd inicjalizacji bazy danych:\", error);\n        throw error;\n    }\n};\n// Funkcje do zarządzania artykułami\nconst articleQueries = {\n    // Pobierz wszystkie artykuły z informacją o polach AI\n    getAllArticles: async ()=>{\n        return await dbAll(`\n      SELECT \n        a.*,\n        GROUP_CONCAT(\n          CASE WHEN aif.is_ai_generated = 1 \n          THEN aif.field_name \n          ELSE NULL END\n        ) as ai_fields\n      FROM articles a\n      LEFT JOIN ai_generated_fields aif ON a.article_id = aif.article_id\n      GROUP BY a.id\n      ORDER BY a.created_at DESC\n    `);\n    },\n    // Pobierz pojedynczy artykuł\n    getArticleById: async (articleId)=>{\n        return await dbGet(`SELECT * FROM articles WHERE article_id = ?`, [\n            articleId\n        ]);\n    },\n    // Sprawdź czy artykuł z danej ścieżki już istnieje\n    getArticleByPath: async (drivePath, filename)=>{\n        return await dbGet(`\n      SELECT * FROM articles \n      WHERE drive_path = ? AND original_filename = ?\n    `, [\n            drivePath,\n            filename\n        ]);\n    },\n    // Sprawdź czy artykuł z tym tytułem już istnieje\n    getArticleByTitle: async (title)=>{\n        return await dbGet(`\n      SELECT * FROM articles \n      WHERE title = ?\n    `, [\n            title\n        ]);\n    },\n    // Pobierz pola AI dla artykułu\n    getAIFieldsForArticle: async (articleId)=>{\n        return await dbAll(`\n      SELECT field_name, is_ai_generated, generation_date, ai_confidence \n      FROM ai_generated_fields \n      WHERE article_id = ?\n    `, [\n            articleId\n        ]);\n    },\n    // Wstaw nowy artykuł\n    insertArticle: async (articleId, title, titleHotnews, titleSocial, titleSeo, lead, description, author, sources, categories, tags, status, importedFrom = null, drivePath = null, originalFilename = null)=>{\n        return await dbRun(`\n      INSERT INTO articles (\n        article_id, title, title_hotnews, title_social, title_seo,\n        lead, description, author, sources, categories, tags, status,\n        imported_from, drive_path, original_filename\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `, [\n            articleId,\n            title,\n            titleHotnews,\n            titleSocial,\n            titleSeo,\n            lead,\n            description,\n            author,\n            sources,\n            categories,\n            tags,\n            status,\n            importedFrom,\n            drivePath,\n            originalFilename\n        ]);\n    },\n    // Aktualizuj artykuł\n    updateArticle: async (title, titleHotnews, titleSocial, titleSeo, lead, description, author, sources, categories, tags, status, articleId)=>{\n        return await dbRun(`\n      UPDATE articles SET\n        title = ?, title_hotnews = ?, title_social = ?, title_seo = ?,\n        lead = ?, description = ?, author = ?, sources = ?, \n        categories = ?, tags = ?, status = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE article_id = ?\n    `, [\n            title,\n            titleHotnews,\n            titleSocial,\n            titleSeo,\n            lead,\n            description,\n            author,\n            sources,\n            categories,\n            tags,\n            status,\n            articleId\n        ]);\n    },\n    // Usuń artykuł\n    deleteArticle: async (articleId)=>{\n        return await dbRun(`DELETE FROM articles WHERE article_id = ?`, [\n            articleId\n        ]);\n    },\n    // Wstaw informację o polu AI\n    insertAIField: async (articleId, fieldName, isAI, confidence)=>{\n        return await dbRun(`\n      INSERT OR REPLACE INTO ai_generated_fields (\n        article_id, field_name, is_ai_generated, ai_confidence\n      ) VALUES (?, ?, ?, ?)\n    `, [\n            articleId,\n            fieldName,\n            isAI,\n            confidence\n        ]);\n    },\n    // Aktualizuj status pola AI (gdy użytkownik edytuje)\n    updateAIFieldStatus: async (articleId, fieldName)=>{\n        return await dbRun(`\n      UPDATE ai_generated_fields \n      SET is_ai_generated = FALSE \n      WHERE article_id = ? AND field_name = ?\n    `, [\n            articleId,\n            fieldName\n        ]);\n    },\n    // Dodaj wpis do historii edycji\n    insertEditHistory: async (articleId, fieldName, oldValue, newValue, editedBy)=>{\n        return await dbRun(`\n      INSERT INTO edit_history (\n        article_id, field_name, old_value, new_value, edited_by\n      ) VALUES (?, ?, ?, ?, ?)\n    `, [\n            articleId,\n            fieldName,\n            oldValue,\n            newValue,\n            editedBy\n        ]);\n    },\n    // === SYNCHRONIZACJA GOOGLE DRIVE ===\n    // Rozpocznij nową synchronizację\n    startSync: async (syncType, targetMonth = null)=>{\n        const result = await dbRun(`\n      INSERT INTO sync_log (sync_type, target_month, status)\n      VALUES (?, ?, 'running')\n    `, [\n            syncType,\n            targetMonth\n        ]);\n        return result.lastID;\n    },\n    // Zakończ synchronizację\n    completeSync: async (syncId, processed, imported, skipped, errorMessage = null)=>{\n        const status = errorMessage ? \"failed\" : \"completed\";\n        return await dbRun(`\n      UPDATE sync_log SET\n        completed_at = CURRENT_TIMESTAMP,\n        status = ?,\n        processed_count = ?,\n        imported_count = ?,\n        skipped_count = ?,\n        error_message = ?\n      WHERE id = ?\n    `, [\n            status,\n            processed,\n            imported,\n            skipped,\n            errorMessage,\n            syncId\n        ]);\n    },\n    // Pobierz ostatnią udaną synchronizację\n    getLastSuccessfulSync: async (syncType = null)=>{\n        let query = `\n      SELECT * FROM sync_log \n      WHERE status = 'completed'\n    `;\n        const params = [];\n        if (syncType) {\n            query += ` AND sync_type = ?`;\n            params.push(syncType);\n        }\n        query += ` ORDER BY completed_at DESC LIMIT 1`;\n        return await dbGet(query, params);\n    },\n    // Zapisz/aktualizuj metadane pliku Drive\n    upsertDriveFileCache: async (fileId, fileName, filePath, modifiedTime, size)=>{\n        return await dbRun(`\n      INSERT OR REPLACE INTO drive_files_cache \n      (file_id, file_name, file_path, modified_time, size, last_checked)\n      VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP)\n    `, [\n            fileId,\n            fileName,\n            filePath,\n            modifiedTime,\n            size\n        ]);\n    },\n    // Sprawdź czy plik był już przetworzony\n    getDriveFileCache: async (fileId)=>{\n        return await dbGet(`\n      SELECT * FROM drive_files_cache WHERE file_id = ?\n    `, [\n            fileId\n        ]);\n    },\n    // Pobierz pliki nowsze niż ostatnia synchronizacja\n    getNewDriveFiles: async (sinceDate)=>{\n        return await dbAll(`\n      SELECT * FROM drive_files_cache \n      WHERE modified_time > ? AND is_processed = FALSE\n      ORDER BY modified_time DESC\n    `, [\n            sinceDate\n        ]);\n    },\n    // Oznacz plik jako przetworzony\n    markDriveFileAsProcessed: async (fileId, isProcessed = true)=>{\n        return await dbRun(`\n      UPDATE drive_files_cache \n      SET is_processed = ?, last_checked = CURRENT_TIMESTAMP\n      WHERE file_id = ?\n    `, [\n            isProcessed,\n            fileId\n        ]);\n    },\n    // Pobierz statystyki synchronizacji\n    getSyncStats: async (limit = 10)=>{\n        return await dbAll(`\n      SELECT \n        sync_type,\n        target_month,\n        started_at,\n        completed_at,\n        status,\n        processed_count,\n        imported_count,\n        skipped_count,\n        error_message\n      FROM sync_log \n      ORDER BY started_at DESC \n      LIMIT ?\n    `, [\n            limit\n        ]);\n    },\n    // Wyczyść cache starszych plików (opcjonalne, do housekeeping)\n    cleanOldDriveCache: async (olderThanDays = 30)=>{\n        return await dbRun(`\n      DELETE FROM drive_files_cache \n      WHERE last_checked < datetime('now', '-${olderThanDays} days')\n    `);\n    }\n};\n// Funkcje pomocnicze\nconst helpers = {\n    // Importuj artykuł z parsera JSON\n    importArticleFromParser: async (articleData)=>{\n        try {\n            // Rozpocznij transakcję\n            await dbRun(\"BEGIN TRANSACTION\");\n            // Wstaw artykuł\n            await articleQueries.insertArticle(articleData.articleId, articleData.title, articleData.titleHotnews, articleData.titleSocial, articleData.titleSeo, articleData.lead, articleData.description, articleData.author, JSON.stringify(articleData.sources), JSON.stringify(articleData.categories), JSON.stringify(articleData.tags), \"draft\");\n            // Oznacz pola wygenerowane przez AI\n            const aiFields = [\n                \"title_hotnews\",\n                \"title_social\",\n                \"title_seo\",\n                \"categories\",\n                \"tags\"\n            ];\n            for (const field of aiFields){\n                await articleQueries.insertAIField(articleData.articleId, field, true, 0.9 // wysoka pewność AI\n                );\n            }\n            // Pola z dokumentu (nie AI)\n            const manualFields = [\n                \"title\",\n                \"lead\",\n                \"description\"\n            ];\n            for (const field of manualFields){\n                await articleQueries.insertAIField(articleData.articleId, field, false, 1.0);\n            }\n            // Zatwierdź transakcję\n            await dbRun(\"COMMIT\");\n            return articleData.articleId;\n        } catch (error) {\n            // Wycofaj transakcję w przypadku błędu\n            await dbRun(\"ROLLBACK\");\n            throw error;\n        }\n    },\n    // Aktualizuj pole artykułu i zaznacz jako edytowane przez użytkownika\n    updateArticleField: async (articleId, fieldName, oldValue, newValue, editedBy = \"user\")=>{\n        try {\n            await dbRun(\"BEGIN TRANSACTION\");\n            // Zapisz historię edycji\n            await articleQueries.insertEditHistory(articleId, fieldName, oldValue, newValue, editedBy);\n            // Oznacz pole jako nieedytowane przez AI\n            await articleQueries.updateAIFieldStatus(articleId, fieldName);\n            await dbRun(\"COMMIT\");\n        } catch (error) {\n            await dbRun(\"ROLLBACK\");\n            throw error;\n        }\n    },\n    // Pobierz statystyki\n    getStats: async ()=>{\n        const totalArticles = await dbGet(\"SELECT COUNT(*) as count FROM articles\");\n        const draftArticles = await dbGet('SELECT COUNT(*) as count FROM articles WHERE status = \"draft\"');\n        const publishedArticles = await dbGet('SELECT COUNT(*) as count FROM articles WHERE status = \"published\"');\n        const aiFieldsCount = await dbGet(\"SELECT COUNT(*) as count FROM ai_generated_fields WHERE is_ai_generated = 1\");\n        return {\n            total: totalArticles.count,\n            draft: draftArticles.count,\n            published: publishedArticles.count,\n            aiFields: aiFieldsCount.count\n        };\n    }\n};\n// Eksportuj API\nmodule.exports = {\n    db,\n    initializeDatabase,\n    queries: articleQueries,\n    helpers\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXVFLG9CQUFvQixPQUFPbkUsV0FBV3VCLFdBQVdLLFVBQVVDLFVBQVVDLFdBQVcsTUFBTTtRQUNwRixJQUFJO1lBQ0YsTUFBTXJELE1BQU07WUFFWix5QkFBeUI7WUFDekIsTUFBTW9CLGVBQWU4QixpQkFBaUIsQ0FDcEMzQixXQUFXdUIsV0FBV0ssVUFBVUMsVUFBVUM7WUFHNUMseUNBQXlDO1lBQ3pDLE1BQU1qQyxlQUFlNkIsbUJBQW1CLENBQUMxQixXQUFXdUI7WUFFcEQsTUFBTTlDLE1BQU07UUFDZCxFQUFFLE9BQU9tQixPQUFPO1lBQ2QsTUFBTW5CLE1BQU07WUFDWixNQUFNbUI7UUFDUjtJQUNGO0lBRUEscUJBQXFCO0lBQ3JCd0UsVUFBVTtRQUNSLE1BQU1DLGdCQUFnQixNQUFNbEYsTUFBTTtRQUNsQyxNQUFNbUYsZ0JBQWdCLE1BQU1uRixNQUFNO1FBQ2xDLE1BQU1vRixvQkFBb0IsTUFBTXBGLE1BQU07UUFDdEMsTUFBTXFGLGdCQUFnQixNQUFNckYsTUFBTTtRQUVsQyxPQUFPO1lBQ0xzRixPQUFPSixjQUFjSyxLQUFLO1lBQzFCQyxPQUFPTCxjQUFjSSxLQUFLO1lBQzFCRSxXQUFXTCxrQkFBa0JHLEtBQUs7WUFDbENWLFVBQVVRLGNBQWNFLEtBQUs7UUFDL0I7SUFDRjtBQUNGO0FBRUEsZ0JBQWdCO0FBQ2hCRyxPQUFPQyxPQUFPLEdBQUc7SUFDZnZHO0lBQ0FpQjtJQUNBdUYsU0FBU2xGO0lBQ1Q4RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jeC1lZGl0b3ItZnJvbnRlbmQvLi9saWIvZGF0YWJhc2UuanM/ZWVhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzcWxpdGUzID0gcmVxdWlyZSgnc3FsaXRlMycpLnZlcmJvc2UoKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7IHByb21pc2lmeSB9ID0gcmVxdWlyZSgndXRpbCcpO1xuXG4vLyBJbmljamFsaXphY2phIGJhenkgZGFueWNoXG5jb25zdCBkYlBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2FydGljbGVzLmRiJyk7XG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKGRiUGF0aCk7XG5cbi8vIFByb21pc2lmeSBtZXRvZCBTUUxpdGUzIC0gUE9QUkFXS0EgZGxhIGxhc3RJRFxuY29uc3QgZGJSdW4gPSAoc3FsLCBwYXJhbXMgPSBbXSkgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgbGFzdElEOiB0aGlzLmxhc3RJRCxcbiAgICAgICAgICBjaGFuZ2VzOiB0aGlzLmNoYW5nZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZGJHZXQgPSBwcm9taXNpZnkoZGIuZ2V0LmJpbmQoZGIpKTtcbmNvbnN0IGRiQWxsID0gcHJvbWlzaWZ5KGRiLmFsbC5iaW5kKGRiKSk7XG5cbi8vIFNjaGVtYXQgYmF6eSBkYW55Y2hcbmNvbnN0IGluaXRpYWxpemVEYXRhYmFzZSA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBUYWJlbGEgYXJ0eWt1xYLDs3dcbiAgICBhd2FpdCBkYlJ1bihgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhcnRpY2xlcyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgYXJ0aWNsZV9pZCBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgdGl0bGVfaG90bmV3cyBURVhULFxuICAgICAgICB0aXRsZV9zb2NpYWwgVEVYVCxcbiAgICAgICAgdGl0bGVfc2VvIFRFWFQsXG4gICAgICAgIGxlYWQgVEVYVCxcbiAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgYXV0aG9yIFRFWFQsXG4gICAgICAgIHNvdXJjZXMgVEVYVCwgLS0gSlNPTiBhcnJheVxuICAgICAgICBjYXRlZ29yaWVzIFRFWFQsIC0tIEpTT04gYXJyYXkgXG4gICAgICAgIHRhZ3MgVEVYVCwgLS0gSlNPTiBhcnJheVxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgaW1wb3J0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgc3RhdHVzIFRFWFQgREVGQVVMVCAnZHJhZnQnIC0tIGRyYWZ0LCBwdWJsaXNoZWQsIGFyY2hpdmVkXG4gICAgICApXG4gICAgYCk7XG5cbiAgICAvLyBNaWdyYWNqYTogZG9kYWogbm93ZSBrb2x1bW55IGplxZtsaSBuaWUgaXN0bmllasSFXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRiUnVuKGBBTFRFUiBUQUJMRSBhcnRpY2xlcyBBREQgQ09MVU1OIGltcG9ydGVkX2Zyb20gVEVYVGApO1xuICAgICAgY29uc29sZS5sb2coJ0RvZGFubyBrb2x1bW7EmSBpbXBvcnRlZF9mcm9tJyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gS29sdW1uYSBqdcW8IGlzdG5pZWplXG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYlJ1bihgQUxURVIgVEFCTEUgYXJ0aWNsZXMgQUREIENPTFVNTiBkcml2ZV9wYXRoIFRFWFRgKTtcbiAgICAgIGNvbnNvbGUubG9nKCdEb2Rhbm8ga29sdW1uxJkgZHJpdmVfcGF0aCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIEtvbHVtbmEganXFvCBpc3RuaWVqZVxuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGJSdW4oYEFMVEVSIFRBQkxFIGFydGljbGVzIEFERCBDT0xVTU4gb3JpZ2luYWxfZmlsZW5hbWUgVEVYVGApO1xuICAgICAgY29uc29sZS5sb2coJ0RvZGFubyBrb2x1bW7EmSBvcmlnaW5hbF9maWxlbmFtZScpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIEtvbHVtbmEganXFvCBpc3RuaWVqZVxuICAgIH1cblxuICAgIC8vIFRhYmVsYSBkbGEgxZtsZWR6ZW5pYSBzeW5jaHJvbml6YWNqaSBHb29nbGUgRHJpdmVcbiAgICBhd2FpdCBkYlJ1bihgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzeW5jX2xvZyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgc3luY190eXBlIFRFWFQgTk9UIE5VTEwsIC0tICdmdWxsJywgJ2luY3JlbWVudGFsJywgJ21vbnRoJ1xuICAgICAgICB0YXJnZXRfbW9udGggVEVYVCwgLS0gTlVMTCBkbGEgZnVsbCwgbmF6d2EgbWllc2nEhWNhIGRsYSBtb250aFxuICAgICAgICBzdGFydGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIGNvbXBsZXRlZF9hdCBEQVRFVElNRSxcbiAgICAgICAgc3RhdHVzIFRFWFQgREVGQVVMVCAncnVubmluZycsIC0tICdydW5uaW5nJywgJ2NvbXBsZXRlZCcsICdmYWlsZWQnXG4gICAgICAgIHByb2Nlc3NlZF9jb3VudCBJTlRFR0VSIERFRkFVTFQgMCxcbiAgICAgICAgaW1wb3J0ZWRfY291bnQgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICAgIHNraXBwZWRfY291bnQgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICAgIGVycm9yX21lc3NhZ2UgVEVYVCxcbiAgICAgICAgbGFzdF9maWxlX21vZGlmaWVkIERBVEVUSU1FIC0tIG5ham5vd3N6eSBwbGlrIHogdGVqIHN5bmNocm9uaXphY2ppXG4gICAgICApXG4gICAgYCk7XG5cbiAgICAvLyBUYWJlbGEgZGxhIG1ldGFkYW55Y2ggcGxpa8OzdyBEcml2ZSAoY2FjaGUpXG4gICAgYXdhaXQgZGJSdW4oYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgZHJpdmVfZmlsZXNfY2FjaGUgKFxuICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgIGZpbGVfaWQgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgIGZpbGVfbmFtZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICBmaWxlX3BhdGggVEVYVCBOT1QgTlVMTCwgLS0gbnAuIFwiTElQSUVDIDIwMjUvQXJ0eWt1xYIgbyBwc2FjaFwiXG4gICAgICAgIG1vZGlmaWVkX3RpbWUgREFURVRJTUUgTk9UIE5VTEwsXG4gICAgICAgIHNpemUgSU5URUdFUixcbiAgICAgICAgbGFzdF9jaGVja2VkIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIGlzX3Byb2Nlc3NlZCBCT09MRUFOIERFRkFVTFQgRkFMU0VcbiAgICAgIClcbiAgICBgKTtcblxuICAgIC8vIFRhYmVsYSBkbGEgxZtsZWR6ZW5pYSBww7NsIHd5Z2VuZXJvd2FueWNoIHByemV6IEFJXG4gICAgYXdhaXQgZGJSdW4oYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYWlfZ2VuZXJhdGVkX2ZpZWxkcyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgYXJ0aWNsZV9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgICBmaWVsZF9uYW1lIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGlzX2FpX2dlbmVyYXRlZCBCT09MRUFOIERFRkFVTFQgVFJVRSxcbiAgICAgICAgZ2VuZXJhdGlvbl9kYXRlIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIGFpX2NvbmZpZGVuY2UgUkVBTCBERUZBVUxUIDEuMCxcbiAgICAgICAgRk9SRUlHTiBLRVkgKGFydGljbGVfaWQpIFJFRkVSRU5DRVMgYXJ0aWNsZXMoYXJ0aWNsZV9pZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIFVOSVFVRShhcnRpY2xlX2lkLCBmaWVsZF9uYW1lKVxuICAgICAgKVxuICAgIGApO1xuXG4gICAgLy8gVGFiZWxhIGRsYSBoaXN0b3JpaSBlZHljamlcbiAgICBhd2FpdCBkYlJ1bihgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBlZGl0X2hpc3RvcnkgKFxuICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgIGFydGljbGVfaWQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgZmllbGRfbmFtZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICBvbGRfdmFsdWUgVEVYVCxcbiAgICAgICAgbmV3X3ZhbHVlIFRFWFQsXG4gICAgICAgIGVkaXRlZF9ieSBURVhUIERFRkFVTFQgJ3VzZXInLFxuICAgICAgICBlZGl0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgRk9SRUlHTiBLRVkgKGFydGljbGVfaWQpIFJFRkVSRU5DRVMgYXJ0aWNsZXMoYXJ0aWNsZV9pZCkgT04gREVMRVRFIENBU0NBREVcbiAgICAgIClcbiAgICBgKTtcblxuICAgIC8vIEluZGVrc3lcbiAgICBhd2FpdCBkYlJ1bihgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FydGljbGVzX2FydGljbGVfaWQgT04gYXJ0aWNsZXMoYXJ0aWNsZV9pZClgKTtcbiAgICBhd2FpdCBkYlJ1bihgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FydGljbGVzX3N0YXR1cyBPTiBhcnRpY2xlcyhzdGF0dXMpYCk7XG4gICAgYXdhaXQgZGJSdW4oYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9hcnRpY2xlc19jcmVhdGVkX2F0IE9OIGFydGljbGVzKGNyZWF0ZWRfYXQpYCk7XG4gICAgYXdhaXQgZGJSdW4oYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9hcnRpY2xlc19kcml2ZV9wYXRoIE9OIGFydGljbGVzKGRyaXZlX3BhdGgpYCk7XG4gICAgYXdhaXQgZGJSdW4oYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9zeW5jX2xvZ19zdGFydGVkX2F0IE9OIHN5bmNfbG9nKHN0YXJ0ZWRfYXQpYCk7XG4gICAgYXdhaXQgZGJSdW4oYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9kcml2ZV9maWxlc19tb2RpZmllZF90aW1lIE9OIGRyaXZlX2ZpbGVzX2NhY2hlKG1vZGlmaWVkX3RpbWUpYCk7XG4gICAgYXdhaXQgZGJSdW4oYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9kcml2ZV9maWxlc19wYXRoIE9OIGRyaXZlX2ZpbGVzX2NhY2hlKGZpbGVfcGF0aClgKTtcbiAgICBhd2FpdCBkYlJ1bihgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FpX2ZpZWxkc19hcnRpY2xlX2lkIE9OIGFpX2dlbmVyYXRlZF9maWVsZHMoYXJ0aWNsZV9pZClgKTtcbiAgICBhd2FpdCBkYlJ1bihgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2VkaXRfaGlzdG9yeV9hcnRpY2xlX2lkIE9OIGVkaXRfaGlzdG9yeShhcnRpY2xlX2lkKWApO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBCYXphIGRhbnljaCB6b3N0YcWCYSB6YWluaWNqYWxpem93YW5hJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIELFgsSFZCBpbmljamFsaXphY2ppIGJhenkgZGFueWNoOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gRnVua2NqZSBkbyB6YXJ6xIVkemFuaWEgYXJ0eWt1xYJhbWlcbmNvbnN0IGFydGljbGVRdWVyaWVzID0ge1xuICAvLyBQb2JpZXJ6IHdzenlzdGtpZSBhcnR5a3XFgnkgeiBpbmZvcm1hY2rEhSBvIHBvbGFjaCBBSVxuICBnZXRBbGxBcnRpY2xlczogYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYkFsbChgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIGEuKixcbiAgICAgICAgR1JPVVBfQ09OQ0FUKFxuICAgICAgICAgIENBU0UgV0hFTiBhaWYuaXNfYWlfZ2VuZXJhdGVkID0gMSBcbiAgICAgICAgICBUSEVOIGFpZi5maWVsZF9uYW1lIFxuICAgICAgICAgIEVMU0UgTlVMTCBFTkRcbiAgICAgICAgKSBhcyBhaV9maWVsZHNcbiAgICAgIEZST00gYXJ0aWNsZXMgYVxuICAgICAgTEVGVCBKT0lOIGFpX2dlbmVyYXRlZF9maWVsZHMgYWlmIE9OIGEuYXJ0aWNsZV9pZCA9IGFpZi5hcnRpY2xlX2lkXG4gICAgICBHUk9VUCBCWSBhLmlkXG4gICAgICBPUkRFUiBCWSBhLmNyZWF0ZWRfYXQgREVTQ1xuICAgIGApO1xuICB9LFxuXG4gIC8vIFBvYmllcnogcG9qZWR5bmN6eSBhcnR5a3XFglxuICBnZXRBcnRpY2xlQnlJZDogYXN5bmMgKGFydGljbGVJZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYkdldChgU0VMRUNUICogRlJPTSBhcnRpY2xlcyBXSEVSRSBhcnRpY2xlX2lkID0gP2AsIFthcnRpY2xlSWRdKTtcbiAgfSxcblxuICAvLyBTcHJhd2TFuiBjenkgYXJ0eWt1xYIgeiBkYW5laiDFm2NpZcW8a2kganXFvCBpc3RuaWVqZVxuICBnZXRBcnRpY2xlQnlQYXRoOiBhc3luYyAoZHJpdmVQYXRoLCBmaWxlbmFtZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYkdldChgXG4gICAgICBTRUxFQ1QgKiBGUk9NIGFydGljbGVzIFxuICAgICAgV0hFUkUgZHJpdmVfcGF0aCA9ID8gQU5EIG9yaWdpbmFsX2ZpbGVuYW1lID0gP1xuICAgIGAsIFtkcml2ZVBhdGgsIGZpbGVuYW1lXSk7XG4gIH0sXG5cbiAgLy8gU3ByYXdkxbogY3p5IGFydHlrdcWCIHogdHltIHR5dHXFgmVtIGp1xbwgaXN0bmllamVcbiAgZ2V0QXJ0aWNsZUJ5VGl0bGU6IGFzeW5jICh0aXRsZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYkdldChgXG4gICAgICBTRUxFQ1QgKiBGUk9NIGFydGljbGVzIFxuICAgICAgV0hFUkUgdGl0bGUgPSA/XG4gICAgYCwgW3RpdGxlXSk7XG4gIH0sXG5cbiAgLy8gUG9iaWVyeiBwb2xhIEFJIGRsYSBhcnR5a3XFgnVcbiAgZ2V0QUlGaWVsZHNGb3JBcnRpY2xlOiBhc3luYyAoYXJ0aWNsZUlkKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiQWxsKGBcbiAgICAgIFNFTEVDVCBmaWVsZF9uYW1lLCBpc19haV9nZW5lcmF0ZWQsIGdlbmVyYXRpb25fZGF0ZSwgYWlfY29uZmlkZW5jZSBcbiAgICAgIEZST00gYWlfZ2VuZXJhdGVkX2ZpZWxkcyBcbiAgICAgIFdIRVJFIGFydGljbGVfaWQgPSA/XG4gICAgYCwgW2FydGljbGVJZF0pO1xuICB9LFxuXG4gIC8vIFdzdGF3IG5vd3kgYXJ0eWt1xYJcbiAgaW5zZXJ0QXJ0aWNsZTogYXN5bmMgKGFydGljbGVJZCwgdGl0bGUsIHRpdGxlSG90bmV3cywgdGl0bGVTb2NpYWwsIHRpdGxlU2VvLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZCwgZGVzY3JpcHRpb24sIGF1dGhvciwgc291cmNlcywgY2F0ZWdvcmllcywgdGFncywgc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRGcm9tID0gbnVsbCwgZHJpdmVQYXRoID0gbnVsbCwgb3JpZ2luYWxGaWxlbmFtZSA9IG51bGwpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgZGJSdW4oYFxuICAgICAgSU5TRVJUIElOVE8gYXJ0aWNsZXMgKFxuICAgICAgICBhcnRpY2xlX2lkLCB0aXRsZSwgdGl0bGVfaG90bmV3cywgdGl0bGVfc29jaWFsLCB0aXRsZV9zZW8sXG4gICAgICAgIGxlYWQsIGRlc2NyaXB0aW9uLCBhdXRob3IsIHNvdXJjZXMsIGNhdGVnb3JpZXMsIHRhZ3MsIHN0YXR1cyxcbiAgICAgICAgaW1wb3J0ZWRfZnJvbSwgZHJpdmVfcGF0aCwgb3JpZ2luYWxfZmlsZW5hbWVcbiAgICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICAgIGAsIFthcnRpY2xlSWQsIHRpdGxlLCB0aXRsZUhvdG5ld3MsIHRpdGxlU29jaWFsLCB0aXRsZVNlbyxcbiAgICAgICAgbGVhZCwgZGVzY3JpcHRpb24sIGF1dGhvciwgc291cmNlcywgY2F0ZWdvcmllcywgdGFncywgc3RhdHVzLFxuICAgICAgICBpbXBvcnRlZEZyb20sIGRyaXZlUGF0aCwgb3JpZ2luYWxGaWxlbmFtZV0pO1xuICB9LFxuXG4gIC8vIEFrdHVhbGl6dWogYXJ0eWt1xYJcbiAgdXBkYXRlQXJ0aWNsZTogYXN5bmMgKHRpdGxlLCB0aXRsZUhvdG5ld3MsIHRpdGxlU29jaWFsLCB0aXRsZVNlbyxcbiAgICAgICAgICAgICAgICAgICAgICAgbGVhZCwgZGVzY3JpcHRpb24sIGF1dGhvciwgc291cmNlcywgY2F0ZWdvcmllcywgdGFncywgc3RhdHVzLCBhcnRpY2xlSWQpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgZGJSdW4oYFxuICAgICAgVVBEQVRFIGFydGljbGVzIFNFVFxuICAgICAgICB0aXRsZSA9ID8sIHRpdGxlX2hvdG5ld3MgPSA/LCB0aXRsZV9zb2NpYWwgPSA/LCB0aXRsZV9zZW8gPSA/LFxuICAgICAgICBsZWFkID0gPywgZGVzY3JpcHRpb24gPSA/LCBhdXRob3IgPSA/LCBzb3VyY2VzID0gPywgXG4gICAgICAgIGNhdGVnb3JpZXMgPSA/LCB0YWdzID0gPywgc3RhdHVzID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QXG4gICAgICBXSEVSRSBhcnRpY2xlX2lkID0gP1xuICAgIGAsIFt0aXRsZSwgdGl0bGVIb3RuZXdzLCB0aXRsZVNvY2lhbCwgdGl0bGVTZW8sXG4gICAgICAgIGxlYWQsIGRlc2NyaXB0aW9uLCBhdXRob3IsIHNvdXJjZXMsIGNhdGVnb3JpZXMsIHRhZ3MsIHN0YXR1cywgYXJ0aWNsZUlkXSk7XG4gIH0sXG5cbiAgLy8gVXN1xYQgYXJ0eWt1xYJcbiAgZGVsZXRlQXJ0aWNsZTogYXN5bmMgKGFydGljbGVJZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYlJ1bihgREVMRVRFIEZST00gYXJ0aWNsZXMgV0hFUkUgYXJ0aWNsZV9pZCA9ID9gLCBbYXJ0aWNsZUlkXSk7XG4gIH0sXG5cbiAgLy8gV3N0YXcgaW5mb3JtYWNqxJkgbyBwb2x1IEFJXG4gIGluc2VydEFJRmllbGQ6IGFzeW5jIChhcnRpY2xlSWQsIGZpZWxkTmFtZSwgaXNBSSwgY29uZmlkZW5jZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYlJ1bihgXG4gICAgICBJTlNFUlQgT1IgUkVQTEFDRSBJTlRPIGFpX2dlbmVyYXRlZF9maWVsZHMgKFxuICAgICAgICBhcnRpY2xlX2lkLCBmaWVsZF9uYW1lLCBpc19haV9nZW5lcmF0ZWQsIGFpX2NvbmZpZGVuY2VcbiAgICAgICkgVkFMVUVTICg/LCA/LCA/LCA/KVxuICAgIGAsIFthcnRpY2xlSWQsIGZpZWxkTmFtZSwgaXNBSSwgY29uZmlkZW5jZV0pO1xuICB9LFxuXG4gIC8vIEFrdHVhbGl6dWogc3RhdHVzIHBvbGEgQUkgKGdkeSB1xbx5dGtvd25payBlZHl0dWplKVxuICB1cGRhdGVBSUZpZWxkU3RhdHVzOiBhc3luYyAoYXJ0aWNsZUlkLCBmaWVsZE5hbWUpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgZGJSdW4oYFxuICAgICAgVVBEQVRFIGFpX2dlbmVyYXRlZF9maWVsZHMgXG4gICAgICBTRVQgaXNfYWlfZ2VuZXJhdGVkID0gRkFMU0UgXG4gICAgICBXSEVSRSBhcnRpY2xlX2lkID0gPyBBTkQgZmllbGRfbmFtZSA9ID9cbiAgICBgLCBbYXJ0aWNsZUlkLCBmaWVsZE5hbWVdKTtcbiAgfSxcblxuICAvLyBEb2RhaiB3cGlzIGRvIGhpc3RvcmlpIGVkeWNqaVxuICBpbnNlcnRFZGl0SGlzdG9yeTogYXN5bmMgKGFydGljbGVJZCwgZmllbGROYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIGVkaXRlZEJ5KSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiUnVuKGBcbiAgICAgIElOU0VSVCBJTlRPIGVkaXRfaGlzdG9yeSAoXG4gICAgICAgIGFydGljbGVfaWQsIGZpZWxkX25hbWUsIG9sZF92YWx1ZSwgbmV3X3ZhbHVlLCBlZGl0ZWRfYnlcbiAgICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxuICAgIGAsIFthcnRpY2xlSWQsIGZpZWxkTmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlLCBlZGl0ZWRCeV0pO1xuICB9LFxuXG4gIC8vID09PSBTWU5DSFJPTklaQUNKQSBHT09HTEUgRFJJVkUgPT09XG5cbiAgLy8gUm96cG9jem5paiBub3fEhSBzeW5jaHJvbml6YWNqxJlcbiAgc3RhcnRTeW5jOiBhc3luYyAoc3luY1R5cGUsIHRhcmdldE1vbnRoID0gbnVsbCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUnVuKGBcbiAgICAgIElOU0VSVCBJTlRPIHN5bmNfbG9nIChzeW5jX3R5cGUsIHRhcmdldF9tb250aCwgc3RhdHVzKVxuICAgICAgVkFMVUVTICg/LCA/LCAncnVubmluZycpXG4gICAgYCwgW3N5bmNUeXBlLCB0YXJnZXRNb250aF0pO1xuICAgIHJldHVybiByZXN1bHQubGFzdElEO1xuICB9LFxuXG4gIC8vIFpha2/FhGN6IHN5bmNocm9uaXphY2rEmVxuICBjb21wbGV0ZVN5bmM6IGFzeW5jIChzeW5jSWQsIHByb2Nlc3NlZCwgaW1wb3J0ZWQsIHNraXBwZWQsIGVycm9yTWVzc2FnZSA9IG51bGwpID0+IHtcbiAgICBjb25zdCBzdGF0dXMgPSBlcnJvck1lc3NhZ2UgPyAnZmFpbGVkJyA6ICdjb21wbGV0ZWQnO1xuICAgIHJldHVybiBhd2FpdCBkYlJ1bihgXG4gICAgICBVUERBVEUgc3luY19sb2cgU0VUXG4gICAgICAgIGNvbXBsZXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBzdGF0dXMgPSA/LFxuICAgICAgICBwcm9jZXNzZWRfY291bnQgPSA/LFxuICAgICAgICBpbXBvcnRlZF9jb3VudCA9ID8sXG4gICAgICAgIHNraXBwZWRfY291bnQgPSA/LFxuICAgICAgICBlcnJvcl9tZXNzYWdlID0gP1xuICAgICAgV0hFUkUgaWQgPSA/XG4gICAgYCwgW3N0YXR1cywgcHJvY2Vzc2VkLCBpbXBvcnRlZCwgc2tpcHBlZCwgZXJyb3JNZXNzYWdlLCBzeW5jSWRdKTtcbiAgfSxcblxuICAvLyBQb2JpZXJ6IG9zdGF0bmnEhSB1ZGFuxIUgc3luY2hyb25pemFjasSZXG4gIGdldExhc3RTdWNjZXNzZnVsU3luYzogYXN5bmMgKHN5bmNUeXBlID0gbnVsbCkgPT4ge1xuICAgIGxldCBxdWVyeSA9IGBcbiAgICAgIFNFTEVDVCAqIEZST00gc3luY19sb2cgXG4gICAgICBXSEVSRSBzdGF0dXMgPSAnY29tcGxldGVkJ1xuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG4gICAgXG4gICAgaWYgKHN5bmNUeXBlKSB7XG4gICAgICBxdWVyeSArPSBgIEFORCBzeW5jX3R5cGUgPSA/YDtcbiAgICAgIHBhcmFtcy5wdXNoKHN5bmNUeXBlKTtcbiAgICB9XG4gICAgXG4gICAgcXVlcnkgKz0gYCBPUkRFUiBCWSBjb21wbGV0ZWRfYXQgREVTQyBMSU1JVCAxYDtcbiAgICBcbiAgICByZXR1cm4gYXdhaXQgZGJHZXQocXVlcnksIHBhcmFtcyk7XG4gIH0sXG5cbiAgLy8gWmFwaXN6L2FrdHVhbGl6dWogbWV0YWRhbmUgcGxpa3UgRHJpdmVcbiAgdXBzZXJ0RHJpdmVGaWxlQ2FjaGU6IGFzeW5jIChmaWxlSWQsIGZpbGVOYW1lLCBmaWxlUGF0aCwgbW9kaWZpZWRUaW1lLCBzaXplKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiUnVuKGBcbiAgICAgIElOU0VSVCBPUiBSRVBMQUNFIElOVE8gZHJpdmVfZmlsZXNfY2FjaGUgXG4gICAgICAoZmlsZV9pZCwgZmlsZV9uYW1lLCBmaWxlX3BhdGgsIG1vZGlmaWVkX3RpbWUsIHNpemUsIGxhc3RfY2hlY2tlZClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgQ1VSUkVOVF9USU1FU1RBTVApXG4gICAgYCwgW2ZpbGVJZCwgZmlsZU5hbWUsIGZpbGVQYXRoLCBtb2RpZmllZFRpbWUsIHNpemVdKTtcbiAgfSxcblxuICAvLyBTcHJhd2TFuiBjenkgcGxpayBiecWCIGp1xbwgcHJ6ZXR3b3J6b255XG4gIGdldERyaXZlRmlsZUNhY2hlOiBhc3luYyAoZmlsZUlkKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiR2V0KGBcbiAgICAgIFNFTEVDVCAqIEZST00gZHJpdmVfZmlsZXNfY2FjaGUgV0hFUkUgZmlsZV9pZCA9ID9cbiAgICBgLCBbZmlsZUlkXSk7XG4gIH0sXG5cbiAgLy8gUG9iaWVyeiBwbGlraSBub3dzemUgbmnFvCBvc3RhdG5pYSBzeW5jaHJvbml6YWNqYVxuICBnZXROZXdEcml2ZUZpbGVzOiBhc3luYyAoc2luY2VEYXRlKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiQWxsKGBcbiAgICAgIFNFTEVDVCAqIEZST00gZHJpdmVfZmlsZXNfY2FjaGUgXG4gICAgICBXSEVSRSBtb2RpZmllZF90aW1lID4gPyBBTkQgaXNfcHJvY2Vzc2VkID0gRkFMU0VcbiAgICAgIE9SREVSIEJZIG1vZGlmaWVkX3RpbWUgREVTQ1xuICAgIGAsIFtzaW5jZURhdGVdKTtcbiAgfSxcblxuICAvLyBPem5hY3ogcGxpayBqYWtvIHByemV0d29yem9ueVxuICBtYXJrRHJpdmVGaWxlQXNQcm9jZXNzZWQ6IGFzeW5jIChmaWxlSWQsIGlzUHJvY2Vzc2VkID0gdHJ1ZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYlJ1bihgXG4gICAgICBVUERBVEUgZHJpdmVfZmlsZXNfY2FjaGUgXG4gICAgICBTRVQgaXNfcHJvY2Vzc2VkID0gPywgbGFzdF9jaGVja2VkID0gQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIFdIRVJFIGZpbGVfaWQgPSA/XG4gICAgYCwgW2lzUHJvY2Vzc2VkLCBmaWxlSWRdKTtcbiAgfSxcblxuICAvLyBQb2JpZXJ6IHN0YXR5c3R5a2kgc3luY2hyb25pemFjamlcbiAgZ2V0U3luY1N0YXRzOiBhc3luYyAobGltaXQgPSAxMCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBkYkFsbChgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIHN5bmNfdHlwZSxcbiAgICAgICAgdGFyZ2V0X21vbnRoLFxuICAgICAgICBzdGFydGVkX2F0LFxuICAgICAgICBjb21wbGV0ZWRfYXQsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgcHJvY2Vzc2VkX2NvdW50LFxuICAgICAgICBpbXBvcnRlZF9jb3VudCxcbiAgICAgICAgc2tpcHBlZF9jb3VudCxcbiAgICAgICAgZXJyb3JfbWVzc2FnZVxuICAgICAgRlJPTSBzeW5jX2xvZyBcbiAgICAgIE9SREVSIEJZIHN0YXJ0ZWRfYXQgREVTQyBcbiAgICAgIExJTUlUID9cbiAgICBgLCBbbGltaXRdKTtcbiAgfSxcblxuICAvLyBXeWN6ecWbxIcgY2FjaGUgc3RhcnN6eWNoIHBsaWvDs3cgKG9wY2pvbmFsbmUsIGRvIGhvdXNla2VlcGluZylcbiAgY2xlYW5PbGREcml2ZUNhY2hlOiBhc3luYyAob2xkZXJUaGFuRGF5cyA9IDMwKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGRiUnVuKGBcbiAgICAgIERFTEVURSBGUk9NIGRyaXZlX2ZpbGVzX2NhY2hlIFxuICAgICAgV0hFUkUgbGFzdF9jaGVja2VkIDwgZGF0ZXRpbWUoJ25vdycsICctJHtvbGRlclRoYW5EYXlzfSBkYXlzJylcbiAgICBgKTtcbiAgfVxufTtcblxuLy8gRnVua2NqZSBwb21vY25pY3plXG5jb25zdCBoZWxwZXJzID0ge1xuICAvLyBJbXBvcnR1aiBhcnR5a3XFgiB6IHBhcnNlcmEgSlNPTlxuICBpbXBvcnRBcnRpY2xlRnJvbVBhcnNlcjogYXN5bmMgKGFydGljbGVEYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJvenBvY3puaWogdHJhbnNha2NqxJlcbiAgICAgIGF3YWl0IGRiUnVuKCdCRUdJTiBUUkFOU0FDVElPTicpO1xuXG4gICAgICAvLyBXc3RhdyBhcnR5a3XFglxuICAgICAgYXdhaXQgYXJ0aWNsZVF1ZXJpZXMuaW5zZXJ0QXJ0aWNsZShcbiAgICAgICAgYXJ0aWNsZURhdGEuYXJ0aWNsZUlkLFxuICAgICAgICBhcnRpY2xlRGF0YS50aXRsZSxcbiAgICAgICAgYXJ0aWNsZURhdGEudGl0bGVIb3RuZXdzLFxuICAgICAgICBhcnRpY2xlRGF0YS50aXRsZVNvY2lhbCxcbiAgICAgICAgYXJ0aWNsZURhdGEudGl0bGVTZW8sXG4gICAgICAgIGFydGljbGVEYXRhLmxlYWQsXG4gICAgICAgIGFydGljbGVEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBhcnRpY2xlRGF0YS5hdXRob3IsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGFydGljbGVEYXRhLnNvdXJjZXMpLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShhcnRpY2xlRGF0YS5jYXRlZ29yaWVzKSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZURhdGEudGFncyksXG4gICAgICAgICdkcmFmdCdcbiAgICAgICk7XG5cbiAgICAgIC8vIE96bmFjeiBwb2xhIHd5Z2VuZXJvd2FuZSBwcnpleiBBSVxuICAgICAgY29uc3QgYWlGaWVsZHMgPSBbXG4gICAgICAgICd0aXRsZV9ob3RuZXdzJywgJ3RpdGxlX3NvY2lhbCcsICd0aXRsZV9zZW8nLCBcbiAgICAgICAgJ2NhdGVnb3JpZXMnLCAndGFncydcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgYWlGaWVsZHMpIHtcbiAgICAgICAgYXdhaXQgYXJ0aWNsZVF1ZXJpZXMuaW5zZXJ0QUlGaWVsZChcbiAgICAgICAgICBhcnRpY2xlRGF0YS5hcnRpY2xlSWQsIFxuICAgICAgICAgIGZpZWxkLCBcbiAgICAgICAgICB0cnVlLCBcbiAgICAgICAgICAwLjkgLy8gd3lzb2thIHBld25vxZvEhyBBSVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBQb2xhIHogZG9rdW1lbnR1IChuaWUgQUkpXG4gICAgICBjb25zdCBtYW51YWxGaWVsZHMgPSBbJ3RpdGxlJywgJ2xlYWQnLCAnZGVzY3JpcHRpb24nXTtcbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgbWFudWFsRmllbGRzKSB7XG4gICAgICAgIGF3YWl0IGFydGljbGVRdWVyaWVzLmluc2VydEFJRmllbGQoXG4gICAgICAgICAgYXJ0aWNsZURhdGEuYXJ0aWNsZUlkLCBcbiAgICAgICAgICBmaWVsZCwgXG4gICAgICAgICAgZmFsc2UsIFxuICAgICAgICAgIDEuMFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBaYXR3aWVyZMW6IHRyYW5zYWtjasSZXG4gICAgICBhd2FpdCBkYlJ1bignQ09NTUlUJyk7XG4gICAgICByZXR1cm4gYXJ0aWNsZURhdGEuYXJ0aWNsZUlkO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFd5Y29mYWogdHJhbnNha2NqxJkgdyBwcnp5cGFka3UgYsWCxJlkdVxuICAgICAgYXdhaXQgZGJSdW4oJ1JPTExCQUNLJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQWt0dWFsaXp1aiBwb2xlIGFydHlrdcWCdSBpIHphem5hY3ogamFrbyBlZHl0b3dhbmUgcHJ6ZXogdcW8eXRrb3duaWthXG4gIHVwZGF0ZUFydGljbGVGaWVsZDogYXN5bmMgKGFydGljbGVJZCwgZmllbGROYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIGVkaXRlZEJ5ID0gJ3VzZXInKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRiUnVuKCdCRUdJTiBUUkFOU0FDVElPTicpO1xuXG4gICAgICAvLyBaYXBpc3ogaGlzdG9yacSZIGVkeWNqaVxuICAgICAgYXdhaXQgYXJ0aWNsZVF1ZXJpZXMuaW5zZXJ0RWRpdEhpc3RvcnkoXG4gICAgICAgIGFydGljbGVJZCwgZmllbGROYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIGVkaXRlZEJ5XG4gICAgICApO1xuXG4gICAgICAvLyBPem5hY3ogcG9sZSBqYWtvIG5pZWVkeXRvd2FuZSBwcnpleiBBSVxuICAgICAgYXdhaXQgYXJ0aWNsZVF1ZXJpZXMudXBkYXRlQUlGaWVsZFN0YXR1cyhhcnRpY2xlSWQsIGZpZWxkTmFtZSk7XG5cbiAgICAgIGF3YWl0IGRiUnVuKCdDT01NSVQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgZGJSdW4oJ1JPTExCQUNLJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sXG5cbiAgLy8gUG9iaWVyeiBzdGF0eXN0eWtpXG4gIGdldFN0YXRzOiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG90YWxBcnRpY2xlcyA9IGF3YWl0IGRiR2V0KCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBhcnRpY2xlcycpO1xuICAgIGNvbnN0IGRyYWZ0QXJ0aWNsZXMgPSBhd2FpdCBkYkdldCgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gYXJ0aWNsZXMgV0hFUkUgc3RhdHVzID0gXCJkcmFmdFwiJyk7XG4gICAgY29uc3QgcHVibGlzaGVkQXJ0aWNsZXMgPSBhd2FpdCBkYkdldCgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gYXJ0aWNsZXMgV0hFUkUgc3RhdHVzID0gXCJwdWJsaXNoZWRcIicpO1xuICAgIGNvbnN0IGFpRmllbGRzQ291bnQgPSBhd2FpdCBkYkdldCgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gYWlfZ2VuZXJhdGVkX2ZpZWxkcyBXSEVSRSBpc19haV9nZW5lcmF0ZWQgPSAxJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWw6IHRvdGFsQXJ0aWNsZXMuY291bnQsXG4gICAgICBkcmFmdDogZHJhZnRBcnRpY2xlcy5jb3VudCxcbiAgICAgIHB1Ymxpc2hlZDogcHVibGlzaGVkQXJ0aWNsZXMuY291bnQsXG4gICAgICBhaUZpZWxkczogYWlGaWVsZHNDb3VudC5jb3VudFxuICAgIH07XG4gIH1cbn07XG5cbi8vIEVrc3BvcnR1aiBBUElcbm1vZHVsZS5leHBvcnRzID0ge1xuICBkYixcbiAgaW5pdGlhbGl6ZURhdGFiYXNlLFxuICBxdWVyaWVzOiBhcnRpY2xlUXVlcmllcyxcbiAgaGVscGVyc1xufTsgIl0sIm5hbWVzIjpbInNxbGl0ZTMiLCJyZXF1aXJlIiwidmVyYm9zZSIsInBhdGgiLCJwcm9taXNpZnkiLCJkYlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImRiIiwiRGF0YWJhc2UiLCJkYlJ1biIsInNxbCIsInBhcmFtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicnVuIiwiZXJyIiwibGFzdElEIiwiY2hhbmdlcyIsImRiR2V0IiwiZ2V0IiwiYmluZCIsImRiQWxsIiwiYWxsIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwiY29uc29sZSIsImxvZyIsImUiLCJlcnJvciIsImFydGljbGVRdWVyaWVzIiwiZ2V0QWxsQXJ0aWNsZXMiLCJnZXRBcnRpY2xlQnlJZCIsImFydGljbGVJZCIsImdldEFydGljbGVCeVBhdGgiLCJkcml2ZVBhdGgiLCJmaWxlbmFtZSIsImdldEFydGljbGVCeVRpdGxlIiwidGl0bGUiLCJnZXRBSUZpZWxkc0ZvckFydGljbGUiLCJpbnNlcnRBcnRpY2xlIiwidGl0bGVIb3RuZXdzIiwidGl0bGVTb2NpYWwiLCJ0aXRsZVNlbyIsImxlYWQiLCJkZXNjcmlwdGlvbiIsImF1dGhvciIsInNvdXJjZXMiLCJjYXRlZ29yaWVzIiwidGFncyIsInN0YXR1cyIsImltcG9ydGVkRnJvbSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJ1cGRhdGVBcnRpY2xlIiwiZGVsZXRlQXJ0aWNsZSIsImluc2VydEFJRmllbGQiLCJmaWVsZE5hbWUiLCJpc0FJIiwiY29uZmlkZW5jZSIsInVwZGF0ZUFJRmllbGRTdGF0dXMiLCJpbnNlcnRFZGl0SGlzdG9yeSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJlZGl0ZWRCeSIsInN0YXJ0U3luYyIsInN5bmNUeXBlIiwidGFyZ2V0TW9udGgiLCJyZXN1bHQiLCJjb21wbGV0ZVN5bmMiLCJzeW5jSWQiLCJwcm9jZXNzZWQiLCJpbXBvcnRlZCIsInNraXBwZWQiLCJlcnJvck1lc3NhZ2UiLCJnZXRMYXN0U3VjY2Vzc2Z1bFN5bmMiLCJxdWVyeSIsInB1c2giLCJ1cHNlcnREcml2ZUZpbGVDYWNoZSIsImZpbGVJZCIsImZpbGVOYW1lIiwiZmlsZVBhdGgiLCJtb2RpZmllZFRpbWUiLCJzaXplIiwiZ2V0RHJpdmVGaWxlQ2FjaGUiLCJnZXROZXdEcml2ZUZpbGVzIiwic2luY2VEYXRlIiwibWFya0RyaXZlRmlsZUFzUHJvY2Vzc2VkIiwiaXNQcm9jZXNzZWQiLCJnZXRTeW5jU3RhdHMiLCJsaW1pdCIsImNsZWFuT2xkRHJpdmVDYWNoZSIsIm9sZGVyVGhhbkRheXMiLCJoZWxwZXJzIiwiaW1wb3J0QXJ0aWNsZUZyb21QYXJzZXIiLCJhcnRpY2xlRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhaUZpZWxkcyIsImZpZWxkIiwibWFudWFsRmllbGRzIiwidXBkYXRlQXJ0aWNsZUZpZWxkIiwiZ2V0U3RhdHMiLCJ0b3RhbEFydGljbGVzIiwiZHJhZnRBcnRpY2xlcyIsInB1Ymxpc2hlZEFydGljbGVzIiwiYWlGaWVsZHNDb3VudCIsInRvdGFsIiwiY291bnQiLCJkcmFmdCIsInB1Ymxpc2hlZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJxdWVyaWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpawel%2FCode%2Fdocxtojson%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();